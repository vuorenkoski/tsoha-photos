{% extends "layout.html" %}
{% block title %}Omat valokuvat{% endblock %}
{% block content %}

{% if session.username %}

<form action="/view" method="POST" id="form">
    <table>
    <tr>
        <td>
            Päivämäärä: 
            <input type="date" name="startdate" value="{{ startdate }}">-
            <input type="date" name="enddate" value="{{ enddate }}">
        </td>
        <td>
            <label for="place">Paikka:</label>
            <select name="place" form="form">
                <option value=""></option>
                {% for place in allPlaces %}
                    <option value="{{ place[0] }}">{{place[0] }}</option>
                {% endfor %}
                <option value="{{ place }}" selected hidden>{{ place }}</option>
            </select>
        </td>
        <td>
            <label for="person">Henkilö:</label>
            <select name="person" form="form">
                <option value=""></option>
                {% for person in allPersons %}
                    <option value="{{ person[0] }}">{{ person[0] }}</option>
                {% endfor %}
                <option value="{{ person }}" selected hidden>{{ person }}</option>
            </select>
        </td>

        <td>
            <label for="keyword">Avainsana:</label>
            <select name="keyword" form="form">
                <option value=""></option>
                {% for keyword in allKeywords %}
                    <option value="{{ keyword[0] }}">{{ keyword[0] }}</option>
                {% endfor %}
                <option value="{{ keyword }}" selected hidden>{{ keyword }}</option>
            </select>
        </td>
    </tr>
    <tr>
        <input type=submit value=Päivitä>
    </tr>
    </table>
</form>

<table>
{% for photo in photos %}
<tr>
    <td>
        <img src="/photos/photo{{ photo[0][0] }}_thmb.jpg">
    </td>
    <td>
        Päivämäärä:
        {% if photo[0][1] %}
             {{ photo[0][1].strftime("%d.%m.%Y") }} 
        {% else %}
            -- 
        {% endif %}
        <br>
        Paikka: 
        {% if photo[0][3] %}
            <a href="/placeinfo/{{ photo[0][4] }}">{{ photo[0][3] }}</a>
        {% else %}
            -- 
        {% endif %}
        <br>
        Kuvaus: {{ photo[0][2] }} <br>
    </td>
    <td>
        Henkilöt: {{ photo[1] }} <br>
        Avainsanat: {{ photo[2] }} <br>
    </td>
    <td>
        <a href="/addinfo/{{ photo[0][0] }}">Muokkaa tietoja</a> <br>
        <a href="/photos/photo{{ photo[0][0] }}.jpg">Näytä kuva</a> <br>
    </td>
</tr>
{% endfor %}

</table>

{% endif %}
{% endblock %}